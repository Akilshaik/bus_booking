<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body { font-family: Arial, sans-serif; font-size: 12px; color: #111; }
    .wrap { width: 100%; border: 1px solid #ddd; padding: 16px; }
    .header { display: flex; justify-content: space-between; align-items: baseline; }
    .title { font-size: 18px; font-weight: bold; }
    .pnr { font-size: 14px; font-weight: bold; }
    .box { margin-top: 12px; border: 1px solid #eee; padding: 10px; }
    table { width: 100%; border-collapse: collapse; margin-top: 8px; }
    th, td { border: 1px solid #eee; padding: 8px; text-align: left; }
    th { background: #f5f5f5; }
    .muted { color: #666; }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="header">
      <div class="title">BusBooking E‑Ticket</div>
      <div class="pnr">PNR: {{ booking.pnr }}</div>
    </div>

    <div class="box">
      <div><b>Route:</b> {{ booking.trip.route.source }} → {{ booking.trip.route.destination }}</div>
      <div><b>Date:</b> {{ booking.trip.journey_date }}</div>
      <div><b>Time:</b> {{ booking.trip.departure_time }} - {{ booking.trip.arrival_time }}</div>
      <div><b>Bus:</b> {{ booking.trip.bus.operator_name }} ({{ booking.trip.bus.get_bus_type_display }})</div>
      <div><b>Status:</b> {{ booking.status }}</div>
      <div><b>Total Fare:</b> ₹{{ booking.total_fare }}</div>
      <div class="muted">Booked on: {{ booking.created_at }}</div>
    </div>

    <div class="box">
      <b>Passengers</b>
      <table>
        <thead>
          <tr>
            <th>#</th>
            <th>Name</th>
            <th>Age</th>
            <th>Gender</th>
            <th>Seat</th>
          </tr>
        </thead>
        <tbody>
          {% for ps in booking.passengers.all %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td>{{ ps.name }}</td>
              <td>{{ ps.age }}</td>
              <td>{{ ps.gender }}</td>
              <td>
                {# If you map passenger->seat differently, adjust here #}
                {% if booking.seats.all|length >= forloop.counter %}
                  {{ booking.seats.all|slice:forloop.counter|last.seat.seat_number }}
                {% else %}
                  —
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      <p class="muted">Please carry a valid ID proof while traveling.</p>
    </div>
  </div>
</body>
</html>